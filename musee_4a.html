<!DOCTYPE html>
<html>
  <head>
    <script src="src/aframe.min.js"></script>
    <script src="src/aframe-ar.js"></script>
    <style>
      #hud {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 15px;
        border-radius: 8px;
        display: none;
        z-index: 1000;
        min-width: 200px;
        font-size: 1.2em;
        max-height: 300px;
        width: 30%; 
        overflow: scroll;
      }
    </style>
  </head>
  <body style="margin:0;">
    <div id="hud"></div>
    <a-scene embedded arjs>
      <a-assets timeout="10000">
        <a-asset-item id="a_SaYa" src="https://dphilipponlfiv.github.io/techno/textures/SaYa/SaYa.glb"></a-asset-item>
      </a-assets>
      <a-marker id="SaYa" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-output_SaYa.patt">
        <a-entity 
            gltf-model="#a_SaYa"
            position="0 0 0"
            scale="0.25 0.25 0.25"
            rotation="0 0 0">
          </a-entity>
      </a-marker>   
      <a-marker id="MaDa" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-output_MaDa.patt">
        <a-image src="https://dphilipponlfiv.github.io/techno/images/MaDa.jpeg"
                 position="0 0 0"
                 rotation="-90 0 0"
                 width="2"
                 height="2">
        </a-image>
      </a-marker>   
      <a-marker id="MaKi" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-output_MaKi.patt">
        <a-image src="https://dphilipponlfiv.github.io/techno/images/MaKi.jpeg"
                 position="0 0 0"
                 rotation="-90 0 0"
                 width="2"
                 height="2">
        </a-image>
      </a-marker>   
      <a-marker id="PhLo" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-output_PhLo.patt">
        <a-image src="https://dphilipponlfiv.github.io/techno/images/PhLo.jpg"
                 position="0 0 0"
                 rotation="-90 0 0"
                 width="2"
                 height="2">
        </a-image>
      </a-marker>  
      <a-entity camera></a-entity>
    </a-scene>
    <script>
      const markerInfos = {
        MaDa: {
          titre: "Le jardin de l'artiste à giverny",
          auteur: "Claude Monet",
          annee: "1900",
          lieu: "musée d'Orsay, Paris",
          description: "C'est un tableau peint par l'artiste impressioniste, Claude Monet en 1900. Elle est conservée au musée d'orsay, à Paris. Cette oeuvre dépicte un chemin passant par un jardin de fleurs violets entourés par des arbres.",
          opinion: "On a choisi cette oeuvre car Monet est un de nos artistes préférés! :D"
        },
        MaKi: {
          titre: "Le baiser",
          auteur: "Gustav Klimt",
          annee: "1909",
          lieu: "Palais du Belvédère, Vienne",
          description: "Elle représente un homme qui embrasse une femme sur la joue.  ",
          opinion: "On a chosis cette oeuvre, car mia a un puzzle de cet oeuvre."
        },
        ThBa: {
          titre: "La Louve Capitoline",
          auteur: "Inconnu",
          annee: "1471",
          lieu: "Musée du Capitole , Rome",
          description: "Un symbole associé à la mythique légende de Romulus et Rémus et les plus reconnaisables de la mythologie antique",
          opinion: "C'est cool"
        },
        PhLo: {
          titre: "Ophélie",
          auteur: "John Everett Millais",
          annee: "1851",
          lieu: "Tate Britain , à Londres",
          description: "Elle représente une personnage s'apelle Ophélie, qui vient de piéce de Hamlet.",
          opinion: "C'est très belle hehe"
        },
        OlSi: {
          titre: "Christ le Rédempteur",
          auteur: "Paul Landowski",
          annee: "1931",
          lieu: "????",
          description: "Statue de Jesus Christ en haut de mont Concorvado",
          opinion: "C'est beau et grand"
        },
        SaYa: {
          titre: "Les trois ombres",
          auteur: "Auguste Rodin",
          annee: "1889",
          lieu: "Musée de rodin -Paris",
          description: "Les trois ombres: est une piece faite pour regarder le spectateur du haut de la porte des enfers  ",
          opinion: "elle fait partie integrante de la porte des enfers alors pourquoi pas :)"
        }
        // Ajoutez d'autres marqueurs si besoin
      };
      function generateHudContent(info) {
        return `
          <h2>${info.titre}</h2>
          <strong>Auteur :</strong> ${info.auteur}<br/>
          <strong>Année :</strong> ${info.annee}<br/>
          <strong>Lieu de conservation :</strong> ${info.lieu}<br/><br/>
          <strong>Description :</strong><br/>${info.description}<br/><br/>
          <strong>Opinion :</strong><br/>${info.opinion}
        `;
      }

      // Liste des marqueurs à surveiller
      const markerIds = Object.keys(markerInfos);

      const hud = document.getElementById('hud');
      let currentVisibleMarker = null;

      markerIds.forEach(markerId => {
        const marker = document.getElementById(markerId);

        marker.addEventListener('markerFound', () => {
          // Si un autre marqueur était affiché, on ne le remplace que si c'est un nouveau
          if (currentVisibleMarker !== markerId) {
            hud.innerHTML = generateHudContent(markerInfos[markerId]);
            hud.style.display = 'block';
            currentVisibleMarker = markerId;
          }
        });

        marker.addEventListener('markerLost', () => {
          // Si le marqueur perdu est celui actuellement affiché, on masque le HUD
          if (currentVisibleMarker === markerId) {
            hud.style.display = 'none';
            currentVisibleMarker = null;
          }
        });
      });
    </script>
  </body>
</html>
