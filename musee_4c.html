<!DOCTYPE html>
<html>
  <head>
    <script src="src/aframe.min.js"></script>
    <script src="src/aframe-ar.js"></script>
    <style>
      #hud {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 15px;
        border-radius: 8px;
        display: none;
        z-index: 1000;
        min-width: 200px;
        font-size: 1.2em;
        max-height: 300px;
        width: 30%; 
        overflow: scroll;
      }
    </style>
  </head>
  <body style="margin:0;">
    <div id="hud"></div>
    <a-scene embedded arjs>
      <a-assets timeout="10000">
        <a-asset-item id="a_SKOM" src="https://dphilipponlfiv.github.io/techno/textures/SkOM.glb"></a-asset-item>
        <a-asset-item id="a_ARCT" src="https://dphilipponlfiv.github.io/techno/textures/ArCT.glb"></a-asset-item>
        <a-asset-item id="a_ELPA" src="https://dphilipponlfiv.github.io/techno/textures/ElPa.glb"></a-asset-item>
        <a-asset-item id="a_PHSA" src="https://dphilipponlfiv.github.io/techno/textures/PhSa.glb"></a-asset-item>
        <a-asset-item id="a_CLEB" src="https://dphilipponlfiv.github.io/techno/textures/ClEb.glb"></a-asset-item>
      </a-assets>
      <a-marker id="SKOM" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-SKOM.patt">
        <a-entity 
            gltf-model="#a_SKOM"
            position="0 -8 6"
            scale="0.15 0.15 0.15"
            rotation="0 -90 90">
          </a-entity>
      </a-marker>   
      <a-marker id="ARCT" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-ARCT.patt">
        <a-entity 
            gltf-model="#a_ARCT"
            position="0 0 0"
            scale="0.5 0.5 0.5"
            rotation="-90 0 0">
          </a-entity>
      </a-marker>   
      <a-marker id="ELPA" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-ELPA.patt">
        <a-entity 
            gltf-model="#a_ELPA"
            position="0 0 0"
            scale="0.5 0.5 0.5"
            rotation="-90 0 0">
          </a-entity>
      </a-marker>   
      <a-marker id="PHSA" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-PHSA.patt">
        <a-entity 
            gltf-model="#a_PHSA"
            position="0 0 0"
            scale="0.5 0.5 0.5"
            rotation="-90 0 0">
          </a-entity>
      </a-marker>   
      <a-marker id="CLEB" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-CLEB.patt">
        <a-entity 
            gltf-model="#a_CLEB"
            position="0 0 0"
            scale="1.5 1.5 1.5"
            rotation="90 0 180">
          </a-entity>
      </a-marker>   
      <a-marker id="PASO" type="pattern" url="https://dphilipponlfiv.github.io/techno/markers/pattern-PASO.patt">
        <a-image src="https://dphilipponlfiv.github.io/techno/images/PaSo.jpg"
                 position="0 0 0"
                 rotation="-90 0 0"
                 width="2"
                 height="2">
        </a-image>
      </a-marker>   
      <a-entity camera></a-entity>
    </a-scene>
    <script>
      const markerInfos = {
        SKOM: {
          titre: "La Statue de la Liberté",
          auteur: "Auguste Bartholdi",
          annee: "1886",
          lieu: "New York",
          description: "une statue argentée qui presente une femme representant la liberté tenant une tablette sur lequelle il y a la date de la déclaration de l'independance des USA (4 juillet 1776)et  une torche qui est un symbole de la lumiere donc l'éspoire de la démocratie",
          opinion: "C'est une partie importante de l'histoire pour les états-unis (relation entre les USA ET FRANCE)(parce que je suis americaine) c'est la beauté de l'histoire "
        },
        CLEB: {
          titre: "Femme au parasol",
          auteur: "Claude Monet",
          annee: "1875",
          lieu: "Musée d'Orsay",
          description: "Une femme tenant un parasol avec son fils dans un champ de fleurs. Un ciel bleu et des herbes hautes en mouvement grace au vent encadrent les personnages qui sont la femme et le fils du peintre, Monet. Il y a beaucoup de mouvement dans cette peinture, le vent fait bouger lezs herbres et les habits de la femme. Cette peinture donne un air maguique et féerique. Monet a fait plusieurs séries de cette peinture, et son style impressioniste en utilisant de la peinture à l'huile rend le moment special. ",
          opinion: "C'est beau, l'oeuvre est coloré et il y a une ambiance très magique. C'est aussi très bien connu et est reliée à l'histoire. En le montrant de manière plus technologique, nous voulont presenter cette oeuvre non comme une chose ancienne et historique mais une chose nouvelle qui est vu chaque fois différemment, c'est la beauté de l'art."
        },
        PHSA: {
          titre: "Le Penseur",
          auteur: "Auguste Rodin",
          annee: "1902",
          lieu: "Musée de Rodin",
          description: "Il représente la réflexion profonde et la contemplation humaine.",
          opinion: "C'est curieux"
        },
        PASO: {
          titre: "La Liberté guidant le peuple",
          auteur: "Eugène Delacroix",
          annee: "1830",
          lieu: "Le musée du Louvre",
          description: "La liberté des droits des peuple represente les peuple de Paris qui c'est soulevé contre le roi Charle X",
          opinion: "Parce qu'elle est historique et représente l'histoire de la France"
        },
        ELPA: {
          titre: "La venus de milo",
          auteur: "Alexandro d'Antioche",
          annee: "Environ 150 av JC",
          lieu: "Le musée du Louvre",
          description: "sculpture antique en marbre, souvent identifiée comme représentant Aphrodite, déesse grecque de l'amour et de la beauté.",
          opinion: "Car, elle est magnifique, elle représente la beauté,on l'admire également parce qu'elle représente la déesse de l'amour et c'est le fichier qui nous a intéresser, qui représente l'histoire"
        }
        // Ajoutez d'autres marqueurs si besoin
      };
      function generateHudContent(info) {
        return `
          <h2>${info.titre}</h2>
          <strong>Auteur :</strong> ${info.auteur}<br/>
          <strong>Année :</strong> ${info.annee}<br/>
          <strong>Lieu de conservation :</strong> ${info.lieu}<br/><br/>
          <strong>Description :</strong><br/>${info.description}<br/><br/>
          <strong>Opinion :</strong><br/>${info.opinion}
        `;
      }

      // Liste des marqueurs à surveiller
      const markerIds = Object.keys(markerInfos);

      const hud = document.getElementById('hud');
      let currentVisibleMarker = null;

      markerIds.forEach(markerId => {
        const marker = document.getElementById(markerId);

        marker.addEventListener('markerFound', () => {
          // Si un autre marqueur était affiché, on ne le remplace que si c'est un nouveau
          if (currentVisibleMarker !== markerId) {
            hud.innerHTML = generateHudContent(markerInfos[markerId]);
            hud.style.display = 'block';
            currentVisibleMarker = markerId;
          }
        });

        marker.addEventListener('markerLost', () => {
          // Si le marqueur perdu est celui actuellement affiché, on masque le HUD
          if (currentVisibleMarker === markerId) {
            hud.style.display = 'none';
            currentVisibleMarker = null;
          }
        });
      });
    </script>
  </body>
</html>
